--[[

  RRRRR   OOOOO  DDDDD   RRRRR    III  GGGGG   OOOOO
  R    R  O   O  D    D  R    R    I   G       O   O
  RRRRR   O   O  D    D  RRRRR     I   G  GG   O   O
  R   R   O   O  D    D  R   R     I   G   G   O   O
  R    R  O O O  D    D  R    R   III  GGGGG   OOOOO


--]]

-- Servi√ßos
local Players = game:GetService("Players")
local StarterGui = game:GetService("StarterGui")
local UserInputService = game:GetService("UserInputService")
local player = Players.LocalPlayer

local usedKeys = {}

-- Fun√ß√£o de valida√ß√£o de formato da key (prefixo SOWXTEAM_ e 24 caracteres no total)
local function isValidKeyFormat(key)
    return #key == 24 and string.match(key, "^SOWXTEAM_%w+$") ~= nil
end

-- Fun√ß√£o de notifica√ß√£o
local function notify(title, text, duration)
    StarterGui:SetCore("SendNotification", {
        Title = title,
        Text = text,
        Duration = duration or 4
    })
end

-- Criar GUI
local ScreenGui = Instance.new("ScreenGui", game.CoreGui)
ScreenGui.Name = "SOWxTEAM"

local Frame = Instance.new("Frame", ScreenGui)
Frame.Size = UDim2.new(0, 300, 0, 260)
Frame.Position = UDim2.new(0.5, -150, 0.5, -130)
Frame.BackgroundColor3 = Color3.fromRGB(20, 20, 30)
Frame.BorderSizePixel = 0
Frame.Active = true
Instance.new("UICorner", Frame)

-- T√≠tulo
local Title = Instance.new("TextLabel", Frame)
Title.Text = "Key System SOWxTEAM"
Title.Size = UDim2.new(1, -40, 0, 40)
Title.Position = UDim2.new(0, 10, 0, 0)
Title.BackgroundTransparency = 1
Title.TextColor3 = Color3.fromRGB(200, 160, 255)
Title.Font = Enum.Font.SourceSansBold
Title.TextSize = 20
Title.TextXAlignment = Enum.TextXAlignment.Left

-- Bot√£o Fechar
local CloseBtn = Instance.new("TextButton", Frame)
CloseBtn.Text = "X"
CloseBtn.Size = UDim2.new(0, 30, 0, 30)
CloseBtn.Position = UDim2.new(1, -35, 0, 5)
CloseBtn.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
CloseBtn.TextColor3 = Color3.new(1, 1, 1)
CloseBtn.Font = Enum.Font.SourceSansBold
CloseBtn.TextSize = 18
Instance.new("UICorner", CloseBtn)

CloseBtn.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
end)

-- Caixa de texto da key
local TextBox = Instance.new("TextBox", Frame)
TextBox.PlaceholderText = "Digite sua key aqui..."
TextBox.Size = UDim2.new(0.9, 0, 0, 40)
TextBox.Position = UDim2.new(0.05, 0, 0.25, 0)
TextBox.BackgroundColor3 = Color3.fromRGB(40, 30, 60)
TextBox.TextColor3 = Color3.new(1, 1, 1)
TextBox.Text = ""
TextBox.ClearTextOnFocus = false
TextBox.Font = Enum.Font.SourceSans
TextBox.TextSize = 18
Instance.new("UICorner", TextBox)

-- Logo
local Logo = Instance.new("ImageLabel", Frame)
Logo.Size = UDim2.new(0.9, 0, 0, 60)
Logo.Position = UDim2.new(0.05, 0, 0.55, 0)
Logo.BackgroundTransparency = 1
Logo.Image = "rbxassetid://125930606242191"
Logo.ScaleType = Enum.ScaleType.Fit

-- Bot√£o Verificar Key
local VerifyBtn = Instance.new("TextButton", Frame)
VerifyBtn.Text = "Verificar Key"
VerifyBtn.Size = UDim2.new(0.9, 0, 0, 30)
VerifyBtn.Position = UDim2.new(0.05, 0, 0.8, 0)
VerifyBtn.BackgroundColor3 = Color3.fromRGB(100, 70, 150)
VerifyBtn.TextColor3 = Color3.new(1, 1, 1)
VerifyBtn.Font = Enum.Font.SourceSansBold
VerifyBtn.TextSize = 16
Instance.new("UICorner", VerifyBtn)

-- Bot√£o Get Key
local GetBtn = Instance.new("TextButton", Frame)
GetBtn.Text = "Get Key"
GetBtn.Size = UDim2.new(0.9, 0, 0, 30)
GetBtn.Position = UDim2.new(0.05, 0, 0.9, 0)
GetBtn.BackgroundColor3 = Color3.fromRGB(120, 90, 170)
GetBtn.TextColor3 = Color3.new(1, 1, 1)
GetBtn.Font = Enum.Font.SourceSansBold
GetBtn.TextSize = 16
Instance.new("UICorner", GetBtn)

-- Arrastar janela
local dragging, dragInput, mousePos, framePos

-- A√ß√£o do bot√£o Get Key
GetBtn.MouseButton1Click:Connect(function()
    setclipboard("https://sowxteamkey.discloud.app/")
    notify("üîó Link Copiado", "Acesse o site para gerar sua key.", 3)
end)

Frame.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        mousePos = input.Position
        framePos = Frame.Position

        input.Changed:Connect(function()
            if input.UserInputState == Enum.UserInputState.End then
                dragging = false
            end
        end)
    end
end)

Frame.InputChanged:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseMovement then
        dragInput = input
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if input == dragInput and dragging then
        local delta = input.Position - mousePos
        Frame.Position = UDim2.new(
            framePos.X.Scale,
            framePos.X.Offset + delta.X,
            framePos.Y.Scale,
            framePos.Y.Offset + delta.Y
        )
    end
end)

-- A√ß√£o do bot√£o Verificar Key
VerifyBtn.MouseButton1Click:Connect(function()
    local inputKey = TextBox.Text:upper()

    -- Verifica se a chave tem exatamente 24 caracteres e come√ßa com "SOWXTEAM_"
    if not isValidKeyFormat(inputKey) then
        notify("Erro", "‚ùå Formato da key inv√°lido! A key precisa ter 24 caracteres.", 4)
        return
    end

    if usedKeys[inputKey] then
        notify("Erro", "‚ùå Essa key j√° foi usada! Use outra.", 5)
        return
    end

    -- Atribuir a chave diretamente ao script_key
    script_key = inputKey
    usedKeys[inputKey] = true
    notify("Sucesso", "‚úÖ Key correta! Carregando o loader...", 5)

    -- Carregar o script remotamente
    task.wait(1)
    ScreenGui:Destroy()

    -- Agora, carregue o script usando a chave inserida
    local success, err = pcall(function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/jhowmodderx/sowxteamx/refs/heads/main/inicio"))()
    end)

    if not success then
        notify("Erro", "‚ùå N√£o foi poss√≠vel carregar o script: " .. err, 5)
    end
end)
